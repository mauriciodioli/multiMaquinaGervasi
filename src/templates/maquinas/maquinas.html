{% extends "layouts/layout.html" %}

{% block title %}Listado de Trabajos{% endblock %}

{% block content %}
<div class="titulo-maquinas">
    <h1>Lavori di Database</h1>
</div>
<div class="contenedor-flex">
    {% if mensaje %}
        <div>{{ mensaje }}</div>
    {% endif %}

    <!-- Sidebar de máquinas -->
    <div id="sidebar" class="maquinas-lista">
        
        
        <div class="cabecera-maquinas">
            <h2>Macchine Online</h2>
        </div>
        
        <div class="maquinas-header">
            <button class="btn-agregar">➕ Aggiungere</button>           
            <button class="btn-modificar">✏️ Modificare</button>
            <button class="btn-eliminar">➖ Eliminare</button>
        </div>

        <div class="tree">
            <details open>
                <summary data-nombre="Máquina Láser 1">

                    Máquina Plasma 1
                    <i class="fas fa-cog icono-clic" onclick="enviarNombrePorAjax(this, event)"></i>
                  </summary>
                <ul>
                    <li>History</li>
                    <li>Jobs</li>
                    <li>Settings</li>
                    <li>Statistics</li>
                    <li>Logs</li>  
                </ul>
            </details>
            <details>
                <summary data-nombre="Máquina Láser 2">
                    Máquina Plasma 2
                    <i class="fas fa-cog icono-clic" onclick="enviarNombrePorAjax(this, event)"></i>
                </summary>
                <ul>
                    <li>History</li>
                    <li>Jobs</li>
                    <li>Settings</li>
                    <li>Statistics</li>
                    <li>Logs</li>  
                </ul>
            </details>
        </div>
        {% for maquina in maquinas %}
            <div class="maquina-item">
                {{ maquina }}
            </div>
        {% else %}
            <p>non ci sono macchine collegate.</p>
        {% endfor %}
    </div>

    <!-- Resizer -->
    <div id="resizer" class="resizer"></div>

    <!-- Tabla de trabajos -->
    <div class="tabla-container">
        <table>
            <thead>
                <tr>
                    {% for columna in columnas %}
                        <th>{{ columna }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for trabajo in trabajos %}
                    <tr>
                        {% for valor in trabajo %}
                            <td>{{ valor }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>








    <div id="modal-agregar" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Agregar Máquina</h2>
            <input type="text" id="nueva-maquina" placeholder="Nombre de la nueva máquina">
            <button id="confirmar-agregar">Agregar</button>
        </div>
    </div>

    

    <div id="modal-modificar" class="modal">
        <div class="modal-content">
            <span class="close close-modificar">&times;</span>
            <h2>Modificar Nombre de Máquina</h2>
            <input type="text" id="nuevo-nombre-maquina" placeholder="Nuevo nombre de máquina">
            <button id="confirmar-modificar">Modificar</button>
        </div>
    </div>
    


    <div id="modal-eliminar" class="modal">
        <div class="modal-content">
            <span class="close close-eliminar">&times;</span>
            <h2>Eliminar Máquina</h2>
            <p>¿Estás seguro que quieres eliminar esta máquina?</p>
            <button id="confirmar-eliminar">Eliminar</button>
        </div>
    </div>
    

</div>

<link rel="stylesheet" href="{{ url_for('static', filename='css/maquinas/maquinas.css') }}">
<script src="{{ url_for('static', filename='js/maquinas/maquinas.js') }}"></script>
{% endblock %}
